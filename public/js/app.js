var app=angular.module("myApp",["ngRoute","homeCtrl","couponDirective"]).config(["$routeProvider",function(o){"use strict";o.when("/",{controller:"HomeCtrl"}).otherwise({redirectTo:"/"})}]);angular.module("homeCtrl",["ngDialog"]).controller("HomeCtrl",["$scope","ngDialog","couponsService","$log",function(o,n,e,t){"use strict";o.collected=[],o.currentCouponEl={},o.currentCouponId="",o.couponMessages=[],o.coupons=[],o.couponsOnStage=[],o.init=function(){o.getCouponMessages(),o.getCoupons(),o.skrollr()},o.getCouponMessages=function(){e.getMessages().then(function(n){o.couponMessages=n},function(o){t.error(o)})},o.getCoupons=function(){e.getAllCoupons().then(function(n){o.coupons=n,o.gambleCoupons()},function(o){t.error(o)})},o.random=function(o,n){return Math.floor(Math.random()*(n-o+1))+o},o.gambleCoupons=function(){for(var n=o.coupons.length,e=0;n>e;e++){var t=o.coupons[e].coupons.length-1,c=o.random(0,t),r=o.coupons[e].coupons[c];r.floor=e+1,o.couponsOnStage.push(r),console.log(r)}},o.skrollr=function(){skrollr.init({smoothScrolling:!1,mobileDeceleration:.004})},o.openCollectModal=function(){n.open({template:"views/modals/coupon.html",preCloseCallback:function(){o.currentCouponEl.fadeOut("slow")},scope:o})},o.discount=function(){return 2*o.collected.length},o.menuToggle=function(){this.menuState=!this.menuState},o.collect=function(n,e){o.currentCouponEl=$(e.currentTarget),o.currentCouponId=n,o.collected.push({id:n}),o.currentCouponEl.find(".js-coupon").addClass("collected"),o.openCollectModal()},o.init()}]),angular.module("couponDirective",[]).controller("couponCtrl",["$scope",function(){"use strict"}]).directive("coupon",[function(){"use strict";return{restrict:"E",templateUrl:"views/coupon/index.html",scope:{},link:function(o,n,e){var t=e.location.split(","),c=$.trim(t[0]),r=$.trim(t[1]);o.id=e.id,o.floor=e.floor,n.find(".js-coupon").css({left:c,top:r})}}}]),app.service("couponsService",["$http","$q",function(o,n){var e=this;return e.couponMessages={},e.coupons=[],e.getMessages=function(){var t=n.defer();return o.get("data/coupon-messages.json").success(function(o){e.couponMessages=o,t.resolve(o)}).error(function(o){t.reject(o)}),t.promise},e.getAllCoupons=function(){var t=n.defer();return o.get("data/coupons.json").success(function(o){e.coupons=o,t.resolve(o)}).error(function(o){t.reject(o)}),t.promise},e}]);
//# sourceMappingURL=../js/app.js.map