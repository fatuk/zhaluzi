var app=angular.module("myApp",["ngRoute","homeCtrl","couponDirective"]).config(["$routeProvider",function(o){"use strict";o.when("/",{controller:"HomeCtrl"}).otherwise({redirectTo:"/"})}]);angular.module("homeCtrl",["ngDialog"]).controller("HomeCtrl",["$scope","ngDialog","couponsService","$log","$timeout",function(o,e,n,t,c){"use strict";o.collected=[],o.currentCouponEl={},o.currentCouponId="",o.couponMessages=[],o.coupons=[],o.couponsOnStage=[],o.callMeHover2=!1,o.init=function(){o.getCouponMessages(),o.getCoupons(),o.skrollr()},o.callMeShow=function(){console.log("mouse over");var e=o.$on("mouseover",function(){console.log("unregister mouse over")});e(),e(),c(function(){o.callMeHover2=!0},0)},o.callMeHide=function(){c(function(){o.callMeHover2=!1},500)},o.hideIt=function(){c(function(){o.hovering=!1},500)},o.getCouponMessages=function(){n.getMessages().then(function(e){o.couponMessages=e},function(o){t.error(o)})},o.getCoupons=function(){n.getAllCoupons().then(function(e){o.coupons=e,o.gambleCoupons()},function(o){t.error(o)})},o.random=function(o,e){return Math.floor(Math.random()*(e-o+1))+o},o.gambleCoupons=function(){for(var e=o.coupons.length,n=0;e>n;n++){var t=o.coupons[n].coupons.length-1,c=o.random(0,t),r=o.coupons[n].coupons[c];r.floor=n+1,o.couponsOnStage.push(r),console.log(r)}},o.skrollr=function(){skrollr.init({smoothScrolling:!1,mobileDeceleration:.004})},o.openCollectModal=function(){e.open({template:"views/modals/coupon.html",preCloseCallback:function(){o.currentCouponEl.fadeOut("slow")},scope:o,className:"ngdialog ngdialog_coupon ngdialog-theme-default"})},o.discount=function(){return 2*o.collected.length},o.menuToggle=function(){this.menuState=!this.menuState},o.collect=function(e,n){o.currentCouponEl=$(n.currentTarget),o.currentCouponId=e,o.collected.push({id:e}),o.currentCouponEl.find(".js-coupon").addClass("collected"),o.openCollectModal()},o.init()}]),angular.module("couponDirective",[]).controller("couponCtrl",["$scope",function(){"use strict"}]).directive("coupon",[function(){"use strict";return{restrict:"E",templateUrl:"views/coupon/index.html",scope:{},link:function(o,e,n){var t=n.location.split(","),c=$.trim(t[0]),r=$.trim(t[1]);o.id=n.id,o.floor=n.floor,e.find(".js-coupon").css({left:c,top:r})}}}]),app.service("couponsService",["$http","$q",function(o,e){var n=this;return n.couponMessages={},n.coupons=[],n.getMessages=function(){var t=e.defer();return o.get("data/coupon-messages.json").success(function(o){n.couponMessages=o,t.resolve(o)}).error(function(o){t.reject(o)}),t.promise},n.getAllCoupons=function(){var t=e.defer();return o.get("data/coupons.json").success(function(o){n.coupons=o,t.resolve(o)}).error(function(o){t.reject(o)}),t.promise},n}]);
//# sourceMappingURL=../js/app.js.map