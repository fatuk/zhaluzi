var app=angular.module("myApp",["ngRoute","homeCtrl","couponDirective"]).config(["$routeProvider",function(o){"use strict";o.when("/",{controller:"HomeCtrl"}).otherwise({redirectTo:"/"})}]);angular.module("homeCtrl",["ngDialog"]).controller("HomeCtrl",["$scope","ngDialog","couponsService","$log",function(o,e,n,t){"use strict";o.collected=[],o.currentCouponEl={},o.currentCouponId="",o.couponMessages=[],o.coupons=[],o.init=function(){o.getCouponMessages(),o.getCoupons()},o.getCouponMessages=function(){n.getMessages().then(function(e){o.couponMessages=e},function(o){t.error(o)})},o.getCoupons=function(){n.getAllCoupons().then(function(e){o.coupons=e,t.log(e)},function(o){t.error(o)})},o.random=function(o,e){return Math.random()*(e-o)+o},o.skrollr=function(){skrollr.init({smoothScrolling:!0,mobileDeceleration:.004})},o.openCollectModal=function(){e.open({template:"views/modals/coupon.html",preCloseCallback:function(){o.currentCouponEl.fadeOut("slow")},scope:o})},o.discount=function(){return 2*o.collected.length},o.menuToggle=function(){this.menuState=!this.menuState},o.collect=function(e,n){o.currentCouponEl=$(n.currentTarget),o.currentCouponId=e,o.collected.push({id:e}),o.currentCouponEl.find(".js-coupon").addClass("collected"),o.openCollectModal()},o.init()}]),angular.module("couponDirective",[]).controller("couponCtrl",["$scope",function(){"use strict"}]).directive("coupon",[function(){"use strict";return{restrict:"E",templateUrl:"views/coupon/index.html",scope:{},link:function(o,e,n){var t=n.location.split(","),c=$.trim(t[0]),r=$.trim(t[1]);o.id=n.id,e.find(".js-coupon").css({left:c,top:r})}}}]),app.service("couponsService",["$http","$q",function(o,e){var n=this;return n.couponMessages={},n.coupons=[],n.getMessages=function(){var t=e.defer();return o.get("data/coupon-messages.json").success(function(o){n.couponMessages=o,t.resolve(o)}).error(function(o){t.reject(o)}),t.promise},n.getAllCoupons=function(){var t=e.defer();return o.get("data/coupons.json").success(function(o){n.coupons=o,t.resolve(o)}).error(function(o){t.reject(o)}),t.promise},n}]);
//# sourceMappingURL=../js/app.js.map