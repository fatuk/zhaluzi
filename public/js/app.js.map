{"version":3,"sources":["app.js","controllers/homeCtrl.js","controllers/horizontalCtrl.js","directives/couponDirective.js","services/couponsService.js","services/notificationService.js","services/promoCodeService.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["/**\n * App Module\n *\n * Main app module\n */\nvar app = angular.module('myApp', [\n\t\t'ngRoute',\n\t\t'homeCtrl',\n\t\t'couponDirective',\n\t\t'progressButton',\n\t\t'ng.deviceDetector',\n\t\t'sun.scrollable'\n\t])\n\t.config([\n\t\t'$routeProvider',\n\t\t'$sceProvider',\n\t\tfunction ($routeProvider, $sceProvider) {\n\t\t\t'use strict';\n\t\t\t$sceProvider.enabled(false);\n\t\t\t$routeProvider\n\t\t\t\t.when('/', {\n\t\t\t\t\tcontroller: 'HomeCtrl'\n\t\t\t\t})\n\t\t\t\t.when('/:section', {\n\t\t\t\t\tcontroller: 'HomeCtrl'\n\t\t\t\t})\n\t\t\t\t.otherwise({\n\t\t\t\t\tredirectTo: '/'\n\t\t\t\t});\n\t\t}\n\t]);\n","angular.module('homeCtrl', ['ngDialog', 'ngStorage', 'angular-inview'])\n\t.controller('HomeCtrl', [\n\t\t'$interval',\n\t\t'$scope',\n\t\t'ngDialog',\n\t\t'couponsService',\n\t\t'$log',\n\t\t'$timeout',\n\t\t'$localStorage',\n\t\t'detectUtils',\n\t\t'notificationService',\n\t\t'promoCodeService',\n\t\t'$rootScope',\n\t\t'$window',\n\t\t'$routeParams',\n\t\t'deviceDetector',\n\t\tfunction ($interval, $scope, ngDialog, couponsService, $log, $timeout, $localStorage, detectUtils, notificationService, promoCodeService, $rootScope, $window, $routeParams, deviceDetector) {\n\t\t\t'use strict';\n\n\t\t\t// Hashes for sections\n\t\t\t$scope.$on('$routeChangeSuccess', function () {\n\t\t\t\tswitch ($routeParams.section) {\n\t\t\t\tcase 'horizontal':\n\t\t\t\t\t$scope.scrollTo('desk-horizontal');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'vertical':\n\t\t\t\t\t$scope.scrollTo('desk-vertical');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'rollet':\n\t\t\t\t\t$scope.scrollTo('desk-rollet');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'zebra':\n\t\t\t\t\t$scope.scrollTo('desk-zebra');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'wood':\n\t\t\t\t\t$scope.scrollTo('desk-wood');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'contacts':\n\t\t\t\t\t$scope.scrollTo('desk-contacts');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.collected = $localStorage.$default({\n\t\t\t\tcounter: 0\n\t\t\t});\n\t\t\t$scope.floors = $localStorage.$default({\n\t\t\t\tfloorsArray: []\n\t\t\t});\n\t\t\t$scope.currentCouponEl = {};\n\t\t\t$scope.currentCouponId = '';\n\t\t\t$scope.couponMessages = [];\n\t\t\t$scope.coupons = [];\n\t\t\t$scope.couponsOnStage = [];\n\t\t\t$scope.tooltipModals = [];\n\t\t\t$scope.userData = {};\n\t\t\t$scope.userData.phone = '+7';\n\t\t\t$scope.progress = [];\n\t\t\t$scope.progressMessage = [];\n\t\t\t$scope.isCallMe = false;\n\t\t\t$scope.isCallMeZhaluzi = false;\n\t\t\t$scope.isPromoCode = false;\n\t\t\t$scope.isComment = false;\n\n\t\t\t$scope.init = function () {\n\t\t\t\t$scope.setCouponsContainerWidth();\n\t\t\t\t$scope.getCouponMessages();\n\t\t\t\t$scope.getCoupons();\n\t\t\t\t$scope.getTooltipModals();\n\t\t\t\tif (!$scope.isMobile()) {\n\t\t\t\t\t$scope.skrollr();\n\t\t\t\t}\n\n\t\t\t\tif (deviceDetector.isDesktop() || deviceDetector.isTablet()) {\n\t\t\t\t\tif ($scope.collected.counter === 0) {\n\t\t\t\t\t\t$scope.openHelloModal();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconsole.log('Desktop', deviceDetector.isDesktop());\n\t\t\t\tconsole.log('Tablet', deviceDetector.isTablet());\n\t\t\t\t$scope.map();\n\t\t\t};\n\t\t\t$rootScope.$on('ngDialog.opened', function (e, $dialog) {\n\t\t\t\t$scope.lockScroll();\n\t\t\t});\n\t\t\t$scope.lockScroll = function () {\n\t\t\t\t$('.ngdialog-overlay').on('DOMMouseScroll mousewheel', function (ev) {\n\t\t\t\t\tvar $this = $(this),\n\t\t\t\t\t\tscrollTop = this.scrollTop,\n\t\t\t\t\t\tscrollHeight = this.scrollHeight,\n\t\t\t\t\t\theight = $this.height(),\n\t\t\t\t\t\tdelta = (ev.type == 'DOMMouseScroll' ?\n\t\t\t\t\t\t\tev.originalEvent.detail * -40 :\n\t\t\t\t\t\t\tev.originalEvent.wheelDelta),\n\t\t\t\t\t\tup = delta > 0;\n\n\t\t\t\t\tvar prevent = function () {\n\t\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\tev.returnValue = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!up && -delta > scrollHeight - height - scrollTop) {\n\t\t\t\t\t\t// Scrolling down, but this will take us past the bottom.\n\t\t\t\t\t\t$this.scrollTop(scrollHeight);\n\t\t\t\t\t\treturn prevent();\n\t\t\t\t\t} else if (up && delta > scrollTop) {\n\t\t\t\t\t\t// Scrolling up, but this will take us past the top.\n\t\t\t\t\t\t$this.scrollTop(0);\n\t\t\t\t\t\treturn prevent();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t// Close desctop menu when scroll\n\t\t\tangular.element($window).bind('scroll', function (e) {\n\t\t\t\tif ($scope.menuState) {\n\t\t\t\t\t$scope.menuState = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.simulateProgress = function (buttonName, seconds, message, callback) {\n\t\t\t\t$scope.progress[buttonName] = 0;\n\t\t\t\tvar interval = $interval(function () {\n\t\t\t\t\t$scope.progress[buttonName] += 0.2;\n\n\t\t\t\t\tif ($scope.progress[buttonName] >= 1.0) {\n\t\t\t\t\t\t$interval.cancel(interval);\n\n\t\t\t\t\t\t$scope.progressMessage[buttonName] = message;\n\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\t$scope.progress[buttonName] = 0;\n\t\t\t\t\t\t\t$scope.progressMessage[buttonName] = 'Send';\n\t\t\t\t\t\t}, 2000);\n\n\t\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, (seconds / 5) * 1000);\n\t\t\t};\n\n\t\t\t$scope.sendPromo = function (isWrong) {\n\t\t\t\tif (!isWrong) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\temail: $scope.userData.email,\n\t\t\t\t\t\tpromocodeId: $scope.collected.counter\n\t\t\t\t\t};\n\t\t\t\t\tpromoCodeService.sendPromoCode(data)\n\t\t\t\t\t\t.then(function (res) {\n\t\t\t\t\t\t\t// Success\n\t\t\t\t\t\t\t$scope.simulateProgress('promoCode', 1, 'Готово', function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t$scope.progressMessage['promoCode'] = 'Отправить купон!';\n\t\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t$scope.simulateProgress('promoCode', 1, 'Ошибка', function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t$scope.progressMessage['promoCode'] = 'Отправить купон!';\n\t\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t$scope.sendCallMe = function (isWrong) {\n\t\t\t\tif (!isWrong) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tphone: $scope.userData.phone,\n\t\t\t\t\t\theader: 'Перезвоните мне. Промо-сайт Дизайн окна',\n\t\t\t\t\t\ttext: 'Пользователь оставил свой номер телефона и попросил перезвонить.'\n\t\t\t\t\t};\n\n\t\t\t\t\tnotificationService.sendUserData(data)\n\t\t\t\t\t\t.then(function (res) {\n\t\t\t\t\t\t\t// Success\n\t\t\t\t\t\t\t$scope.simulateProgress('callMe', 1, 'Готово', function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t$scope.progressMessage['callMe'] = 'Жду звонка!';\n\t\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t\t$scope.simulateProgress('callMe', 1, 'Ошибка', function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t$scope.progressMessage['callMe'] = 'Жду звонка!';\n\t\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t$scope.sendCallMeZhaluzi = function (isWrong) {\n\t\t\t\tif (!isWrong) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tphone: $scope.userData.phone,\n\t\t\t\t\t\theader: 'Хочу заказать ' + $scope.userData.zhaluziType + '. Промо-сайт Дизайн окна',\n\t\t\t\t\t\ttext: 'Я хочу заказать ' + $scope.userData.zhaluziType + ' и задать по ним вопросы.'\n\t\t\t\t\t};\n\t\t\t\t\tnotificationService.sendUserData(data)\n\t\t\t\t\t\t.then(function (res) {\n\t\t\t\t\t\t\t// Success\n\t\t\t\t\t\t\t$scope.simulateProgress('callMeZhaluzi', 1, 'Готово', function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t$scope.progressMessage['callMeZhaluzi'] = 'Жду звонка!';\n\t\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t$scope.simulateProgress('callMeZhaluzi', 1, 'Ошибка', function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t$scope.progressMessage['callMeZhaluzi'] = 'Жду звонка!';\n\t\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t$scope.sendComment = function (isWrong) {\n\t\t\t\tif (!isWrong) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\temail: $scope.userData.email,\n\t\t\t\t\t\theader: $scope.userData.name + ' оставил комментарий. Промо-сайт Дизайн окна',\n\t\t\t\t\t\ttext: $scope.userData.comment\n\t\t\t\t\t};\n\t\t\t\t\tnotificationService.sendUserData(data)\n\t\t\t\t\t\t.then(function (res) {\n\t\t\t\t\t\t\t// Success\n\t\t\t\t\t\t\t$scope.simulateProgress('comment', 1, 'Готово', function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t$scope.progressMessage['comment'] = 'Отправить';\n\t\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t\t$scope.simulateProgress('comment', 1, 'Ошибка', function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t$scope.progressMessage['comment'] = 'Отправить';\n\t\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t$scope.isMobile = function () {\n\t\t\t\treturn detectUtils.isMobile();\n\t\t\t};\n\n\t\t\t$scope.scrollTo = function (hash) {\n\t\t\t\tvar $body = $('html, body'),\n\t\t\t\t\tscrollLocation = $('#' + hash)[0].offsetTop,\n\t\t\t\t\tmodals = {};\n\n\t\t\t\tmodals['desk-horizontal'] = 1;\n\t\t\t\tmodals['desk-wood'] = 2;\n\t\t\t\tmodals['desk-rollet'] = 3;\n\t\t\t\tmodals['desk-vertical'] = 4;\n\t\t\t\tmodals['desk-zebra'] = 5;\n\n\t\t\t\t$scope.mobileMenuState = false;\n\t\t\t\t$scope.menuState = false;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$body.animate({\n\t\t\t\t\t\tscrollTop: scrollLocation\n\t\t\t\t\t}, '500', function () {\n\n\t\t\t\t\t});\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tif (modals[hash]) {\n\t\t\t\t\t\t\t// Open modal\n\t\t\t\t\t\t\t$scope.openTooltipModal(modals[hash]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 800);\n\t\t\t\t}, 500);\n\t\t\t};\n\n\t\t\t$scope.getViewSize = function () {\n\t\t\t\talert($(window).width() + 'x' + $(window).height());\n\t\t\t};\n\n\t\t\t$scope.getTooltipModals = function () {\n\t\t\t\tcouponsService.getTooltipModals()\n\t\t\t\t\t.then(function (res) {\n\t\t\t\t\t\t// Success\n\t\t\t\t\t\t$scope.tooltipModals = res;\n\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\t$log.error(err);\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\t$scope.openAccordion = function (e) {\n\t\t\t\tvar $accordion = $(e.target).parents('.accordion');\n\n\t\t\t\tif (!$accordion.hasClass('expanded')) {\n\t\t\t\t\t$('.accordion').removeClass('expanded');\n\t\t\t\t\t$accordion.addClass('expanded');\n\t\t\t\t} else {\n\t\t\t\t\t$accordion.removeClass('expanded');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t$scope.openTooltipModal = function (id) {\n\t\t\t\t$scope.tooltipId = id;\n\t\t\t\tngDialog.open({\n\t\t\t\t\ttemplate: 'views/modals/tooltip.html',\n\t\t\t\t\tscope: $scope,\n\t\t\t\t\tpreCloseCallback: function () {\n\n\t\t\t\t\t},\n\t\t\t\t\tclassName: 'ngdialog ngdialog_tooltip ngdialog-theme-default'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t$scope.openHelloModal = function () {\n\t\t\t\tngDialog.open({\n\t\t\t\t\ttemplate: 'views/modals/hello.html',\n\t\t\t\t\tshowClose: false,\n\t\t\t\t\tscope: $scope,\n\t\t\t\t\tpreCloseCallback: function () {\n\n\t\t\t\t\t},\n\t\t\t\t\tclassName: 'ngdialog ngdialog_hello ngdialog-theme-default'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t$scope.openGetDiscountModal = function () {\n\t\t\t\tngDialog.open({\n\t\t\t\t\ttemplate: 'views/modals/get-discount.html',\n\t\t\t\t\tscope: $scope,\n\t\t\t\t\tpreCloseCallback: function () {\n\n\t\t\t\t\t},\n\t\t\t\t\tclassName: 'ngdialog ngdialog_discount ngdialog-theme-default'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t$scope.map = function () {\n\t\t\t\t$('.js-map').gmap3({\n\t\t\t\t\tmarker: {\n\t\t\t\t\t\tlatLng: [55.648677, 37.735566],\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tanimation: 'DROP',\n\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\turl: 'img/pin.png'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmap: {\n\t\t\t\t\t\t// address: \"POURRIERES, Москва\",\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tcenter: [55.648677, 37.735566],\n\t\t\t\t\t\t\tzoom: 14,\n\t\t\t\t\t\t\tzoomControl: true,\n\t\t\t\t\t\t\tnavigationControl: false,\n\t\t\t\t\t\t\tscrollwheel: false,\n\t\t\t\t\t\t\tdisableDefaultUI: true,\n\t\t\t\t\t\t\tstreetViewControl: false,\n\t\t\t\t\t\t\tstyles: [{\n\t\t\t\t\t\t\t\t\"featureType\": \"administrative\",\n\t\t\t\t\t\t\t\t\"elementType\": \"labels.text.fill\",\n\t\t\t\t\t\t\t\t\"stylers\": [{\n\t\t\t\t\t\t\t\t\t\"color\": \"#444444\"\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\"featureType\": \"landscape\",\n\t\t\t\t\t\t\t\t\"elementType\": \"all\",\n\t\t\t\t\t\t\t\t\"stylers\": [{\n\t\t\t\t\t\t\t\t\t\"color\": \"#f2f2f2\"\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\"featureType\": \"poi\",\n\t\t\t\t\t\t\t\t\"elementType\": \"all\",\n\t\t\t\t\t\t\t\t\"stylers\": [{\n\t\t\t\t\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\"featureType\": \"road\",\n\t\t\t\t\t\t\t\t\"elementType\": \"all\",\n\t\t\t\t\t\t\t\t\"stylers\": [{\n\t\t\t\t\t\t\t\t\t\"saturation\": -100\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\"lightness\": 45\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\"featureType\": \"road.highway\",\n\t\t\t\t\t\t\t\t\"elementType\": \"all\",\n\t\t\t\t\t\t\t\t\"stylers\": [{\n\t\t\t\t\t\t\t\t\t\"visibility\": \"simplified\"\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\"featureType\": \"road.arterial\",\n\t\t\t\t\t\t\t\t\"elementType\": \"labels.icon\",\n\t\t\t\t\t\t\t\t\"stylers\": [{\n\t\t\t\t\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\"featureType\": \"transit\",\n\t\t\t\t\t\t\t\t\"elementType\": \"all\",\n\t\t\t\t\t\t\t\t\"stylers\": [{\n\t\t\t\t\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\"featureType\": \"water\",\n\t\t\t\t\t\t\t\t\"elementType\": \"all\",\n\t\t\t\t\t\t\t\t\"stylers\": [{\n\t\t\t\t\t\t\t\t\t\"color\": \"#46bcec\"\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\"visibility\": \"on\"\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t$scope.wow = function () {\n\t\t\t\tnew WOW().init();\n\t\t\t};\n\n\t\t\t// Set coupons container width\n\t\t\t$scope.setCouponsContainerWidth = function () {\n\t\t\t\tvar $couponsContainer = $('.js-couponsContainer');\n\t\t\t\t$couponsContainer.css({\n\t\t\t\t\t// width: $(window).width()\n\t\t\t\t\twidth: 1600\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t// For points position adjusting\n\t\t\t$scope.getLocation = function (e) {\n\t\t\t\tvar $couponsContainer = $('.js-couponsContainer'),\n\t\t\t\t\twidth = $couponsContainer.width(),\n\t\t\t\t\theight = $('body').height(),\n\t\t\t\t\tx = e.pageX,\n\t\t\t\t\ty = e.pageY;\n\n\t\t\t\tconsole.info(x / width * 100 + '%, ' + y + 'px');\n\t\t\t};\n\n\t\t\t$scope.getCouponMessages = function () {\n\t\t\t\tcouponsService.getMessages()\n\t\t\t\t\t.then(function (res) {\n\t\t\t\t\t\t// Success\n\t\t\t\t\t\t$scope.couponMessages = res;\n\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\t$log.error(err);\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\t$scope.getCoupons = function () {\n\t\t\t\tcouponsService.getAllCoupons()\n\t\t\t\t\t.then(function (res) {\n\t\t\t\t\t\t// Success\n\t\t\t\t\t\t$scope.coupons = res;\n\t\t\t\t\t\t$scope.gambleCoupons();\n\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\t$log.error(err);\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\t$scope.random = function (min, max) {\n\t\t\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n\t\t\t};\n\n\t\t\t$scope.gambleCoupons = function () {\n\t\t\t\tvar floorsCount = $scope.coupons.length,\n\t\t\t\t\tcouponsIdArray = [];\n\n\t\t\t\t// Get coupons flat id array\n\t\t\t\t_.each($scope.coupons, function (item, i) {\n\t\t\t\t\tcouponsIdArray.push(i + 1);\n\t\t\t\t});\n\n\t\t\t\t// Get rest floors\n\t\t\t\t$scope.actualFloors = _.difference(couponsIdArray, $scope.floors.floorsArray);\n\n\t\t\t\tfor (var i = 0; i < $scope.actualFloors.length; i++) {\n\t\t\t\t\tvar max = $scope.coupons[$scope.actualFloors[i] - 1].coupons.length - 1,\n\t\t\t\t\t\trnd = $scope.random(0, max),\n\t\t\t\t\t\trandomCoupon = $scope.coupons[$scope.actualFloors[i] - 1].coupons[rnd];\n\n\t\t\t\t\trandomCoupon.floor = $scope.actualFloors[i];\n\t\t\t\t\t$scope.couponsOnStage.push(randomCoupon);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t$scope.skrollr = function () {\n\t\t\t\tvar s = skrollr.init({\n\t\t\t\t\tsmoothScrolling: false,\n\t\t\t\t\tmobileDeceleration: 0.004\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t$scope.openCollectModal = function () {\n\t\t\t\tngDialog.open({\n\t\t\t\t\ttemplate: 'views/modals/coupon.html',\n\t\t\t\t\tpreCloseCallback: function () {\n\t\t\t\t\t\t$scope.currentCouponEl.fadeOut('slow');\n\t\t\t\t\t},\n\t\t\t\t\tscope: $scope,\n\t\t\t\t\tclassName: 'ngdialog ngdialog_coupon ngdialog-theme-default'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t$scope.discount = function () {\n\t\t\t\treturn $scope.collected.counter * 2;\n\t\t\t};\n\n\t\t\t$scope.menuToggle = function () {\n\t\t\t\t$scope.menuState = !$scope.menuState;\n\t\t\t};\n\n\t\t\t$scope.mobileMenuToggle = function () {\n\t\t\t\t$scope.mobileMenuState = !$scope.mobileMenuState;\n\t\t\t};\n\n\t\t\t$scope.collect = function (id, e) {\n\t\t\t\t$scope.currentCouponEl = $(e.currentTarget);\n\t\t\t\t$scope.currentCouponId = id;\n\n\t\t\t\t$scope.collected.counter++;\n\n\t\t\t\t$scope.currentCouponEl.find('.js-coupon').addClass('collected');\n\n\t\t\t\t$scope.currentCouponEl.addClass('cbutton--click');\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$scope.openCollectModal();\n\t\t\t\t}, 500);\n\n\n\t\t\t\t$scope.floors.floorsArray.push($scope.currentCouponId);\n\t\t\t};\n\n\t\t\t$scope.clearCollected = function () {\n\t\t\t\tlocalStorage.clear();\n\t\t\t\tlocation.reload();\n\t\t\t};\n\n\t\t\t$scope.init();\n\t\t}\n\t]);\n","angular.module('horizontalCtrl', [])\n\t.controller('HorizontalCtrl', [\n\t\t'$scope',\n\t\tfunction ($scope) {\n\t\t\t'use strict';\n\n\t\t\tconsole.log('horizontal');\n\t\t}\n\t]);\n","angular.module('couponDirective', [])\n\t.controller('couponCtrl', ['$scope',\n\t\tfunction ($scope) {\n\t\t\t'use strict';\n\t\t}\n\t])\n\t.directive('coupon', [\n\n\t\tfunction () {\n\t\t\t'use strict';\n\t\t\treturn {\n\t\t\t\trestrict: 'E',\n\t\t\t\ttemplateUrl: 'views/coupon/index.html',\n\t\t\t\tscope: {},\n\t\t\t\treplace: true,\n\t\t\t\tlink: function (scope, el, attr) {\n\t\t\t\t\tvar locationArray = attr.location.split(','),\n\t\t\t\t\t\tleft = $.trim(locationArray[0]),\n\t\t\t\t\t\ttop = $.trim(locationArray[1]);\n\n\t\t\t\t\tscope.id = attr.id;\n\t\t\t\t\tscope.floor = attr.floor;\n\t\t\t\t\tscope.img = attr.img;\n\t\t\t\t\tscope.type = attr.type;\n\n\t\t\t\t\tel.css({\n\t\t\t\t\t\tleft: left,\n\t\t\t\t\t\ttop: top\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t]);\n","app.service('couponsService', ['$http', '$q',\n\n\tfunction ($http, $q) {\n\t\tvar coupon = this;\n\t\tcoupon.couponMessages = {};\n\t\tcoupon.tooltipModals = {};\n\t\tcoupon.coupons = [];\n\n\t\tcoupon.getTooltipModals = function () {\n\t\t\tvar defer = $q.defer();\n\n\t\t\t$http.get('data/tooltip-modals.json')\n\t\t\t\t.success(function (res) {\n\t\t\t\t\tcoupon.tooltipModals = res;\n\t\t\t\t\tdefer.resolve(res);\n\t\t\t\t})\n\t\t\t\t.error(function (err, status) {\n\t\t\t\t\tdefer.reject(err);\n\t\t\t\t});\n\n\t\t\treturn defer.promise;\n\t\t};\n\n\t\tcoupon.getMessages = function () {\n\t\t\tvar defer = $q.defer();\n\n\t\t\t$http.get('data/coupon-messages.json')\n\t\t\t\t.success(function (res) {\n\t\t\t\t\tcoupon.couponMessages = res;\n\t\t\t\t\tdefer.resolve(res);\n\t\t\t\t})\n\t\t\t\t.error(function (err, status) {\n\t\t\t\t\tdefer.reject(err);\n\t\t\t\t});\n\n\t\t\treturn defer.promise;\n\t\t};\n\n\t\tcoupon.getAllCoupons = function () {\n\t\t\tvar defer = $q.defer();\n\n\t\t\t$http.get('data/coupons.json')\n\t\t\t\t.success(function (res) {\n\t\t\t\t\tcoupon.coupons = res;\n\t\t\t\t\tdefer.resolve(res);\n\t\t\t\t})\n\t\t\t\t.error(function (err, status) {\n\t\t\t\t\tdefer.reject(err);\n\t\t\t\t});\n\n\t\t\treturn defer.promise;\n\t\t};\n\n\n\n\t\treturn coupon;\n\t}\n]);\n","app.service('notificationService', ['$http', '$q',\n\n\tfunction ($http, $q) {\n\t\tvar notification = this;\n\n\t\tnotification.sendUserData = function (data) {\n\t\t\tvar defer = $q.defer();\n\n\t\t\t$http.post('send_notification.php', data)\n\t\t\t\t.success(function (res) {\n\t\t\t\t\tdefer.resolve(res);\n\t\t\t\t})\n\t\t\t\t.error(function (err, status) {\n\t\t\t\t\tdefer.reject(err);\n\t\t\t\t});\n\n\t\t\treturn defer.promise;\n\t\t};\n\n\t\treturn notification;\n\t}\n]);\n","app.service('promoCodeService', ['$http', '$q',\n\n\tfunction ($http, $q) {\n\t\tvar promoCode = this;\n\n\t\tpromoCode.sendPromoCode = function (data) {\n\t\t\tvar defer = $q.defer();\n\n\t\t\t$http.post('send_promocode.php', data)\n\t\t\t\t.success(function (res) {\n\t\t\t\t\tdefer.resolve(res);\n\t\t\t\t})\n\t\t\t\t.error(function (err, status) {\n\t\t\t\t\tdefer.reject(err);\n\t\t\t\t});\n\n\t\t\treturn defer.promise;\n\t\t};\n\n\t\treturn promoCode;\n\t}\n]);\n"],"sourceRoot":"/source/"}